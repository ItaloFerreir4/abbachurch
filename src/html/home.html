@SPK@include("partials/mainhead.html")

@SPK@include("partials/fileupload_link.html")

<link rel="stylesheet" href="../assets/libs/fullcalendar/main.min.css">
<link rel="stylesheet" href="../assets/libs/apexcharts/apexcharts.css">

</head>

<body>
    @SPK@include("partials/switcher.html")
    @SPK@include("partials/loader.html")

    <div class="page">
        @SPK@include("partials/header.html")
        @SPK@include("partials/sidebar.html")
        @SPK@include("partials/dashbord-page-header.html", {"dashbordtitle": "Calendário", "dashbordsubtitle": 'Dashboard' ,"dashbordsubtitle2": 'Calendário'})

        <!-- Start::app-content -->
        <div class="main-content app-content">
            <div class="container-fluid">
                <div class="card custom-card">
                    <div class="card-header align-center" style="overflow: auto;">
                        <h5 class="fw-medium mb-0 text-muted translate">Filtros</h5>
                        <div class="d-flex">
                            <button class="btn btn-outline-light btn-wave waves-effect waves-light btn-md ms-3 btn-filter translate" id="filter-todos" type="button" onClick="CalendarioFull(this)">Todos</button>
                            <button class="btn btn-outline-light btn-wave waves-effect waves-light btn-md ms-2 btn-filter translate" type="button" onClick="CalendarioNiver(this)">Aniversários</button>
                            <div class="ms-2">
                                <select class="form-select single-select btn-md btn-filter" id="filter-categoria" onChange="CalendarioCat(this)"></select>
                            </div>
                            <div class="ms-2">
                                <select class="form-select single-select btn-md btn-filter" id="filter-ministerio" onChange="CalendarioMin(this)"></select>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="calendario"></div>
                    </div>
                </div>
                <div class="row row-cols-xl-2 row-cols-md-1">
                    <div class="col card-background flex-fill">
                        <div class="card custom-card">
                            <div class="card-header">
                                <div class="card-title translate">Eventos do ano</div>
                            </div>
                            <div class="card-body">
                                <div id="chart-events-year"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col card-background flex-fill">
                        <div class="card custom-card">
                            <div class="card-header">
                                <div class="card-title translate">Ações voluntários</div>
                            </div>
                            <div class="card-body">
                                <div id="chart-action-volun"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End::app-content -->

        @SPK@include("partials/headersearch_modal.html")
        @SPK@include("partials/footer.html")
        @SPK@include("partials/side-bar.html")

    </div>

    @SPK@include("partials/commonjs.html")

    @SPK@include("partials/custom_switcherjs.html")

    <!-- Fullcalendar JS -->
    <script src="../assets/libs/fullcalendar/main.min.js"></script>
    <!-- <script src="../assets/js/fullcalendar.js"></script> -->

    <!-- Apex Charts JS -->
    <script src="../assets/libs/apexcharts/apexcharts.min.js"></script>

    <!-- Custom JS -->
    <script src="../assets/js/custom.js"></script>

    <script>
        window.addEventListener("load", function() {
            const buttonTodos = document.getElementById("filter-todos");
            ListarCategorias();
            CalendarioFull(buttonTodos);
            GraficoLinhaEvento();
            GraficoBarraVoluntario();
        });
        
        function CalendarioFull(button){

            TirarSelecaoBtn();
            button.classList.add("active");

            IniLoader();

            Promise.all([ListarEventos(), ListarPessoas()]).then(function ([dataEventos, dataPessoas]) {

                const idBirthday = dataEventos.length + 1;

                const dataCalendarBirthday = {
                    id: idBirthday,
                    backgroundColor: 'rgba(var(--teal-rgb), 0.4)',
                    borderColor: 'rgba(var(--teal-rgb), 1)',
                    textColor: '#fff',
                    events: dataPessoas
                }

                dataEventos.push(dataCalendarBirthday);

                const calendarEl = document.getElementById('calendario');

                let calendarOptions = {
                    headerToolbar: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
                    },
                    defaultView: 'month',
                    navLinks: true,
                    businessHours: true,
                    editable: false,
                    selectable: false,
                    selectMirror: false,
                    droppable: false,
                    eventClick: function (arg) {
                        console.log('arg.event:', arg.event);
                        const niver = arg.event.extendedProps.isNiver;
                        if(niver == 0){
                            const descriptionEvent = arg.event.extendedProps.description;
                            const localEvent = arg.event.extendedProps.localEvent;
                            let dataEvent = arg.event.extendedProps.dataEvent;
                            dataEvent = new Date(dataEvent);
                            dataEvent = formatarDataHora(dataEvent);
                            Swal.fire({
                                position: 'center',
                                icon: 'info',
                                title: arg.event.title,
                                html: 
                                '<br> <strong>Data:</strong> ' + dataEvent +
                                '<br> <strong>Local:</strong> ' + localEvent +
                                '<br> <strong>Descrição:</strong> ' + descriptionEvent,
                                showConfirmButton: true,
                            });
                        }
                        else{
                            const descriptionEvent = arg.event.extendedProps.description;
                            Swal.fire({
                                position: 'center',
                                icon: 'info',
                                title: arg.event.title,
                                html: '<br> <strong>Descrição:</strong> ' + descriptionEvent,
                                showConfirmButton: true,
                            });
                        }
                    },
                    dayMaxEvents: true,
                    eventSources: dataEventos,
                };

                // Verifique a largura da tela e ajuste a visualização padrão
                if (window.innerWidth < 1200) {
                    calendarOptions.initialView = 'listWeek';
                }

                console.log(calendarOptions);
                let calendar = new FullCalendar.Calendar(calendarEl, calendarOptions);
                calendar.render();

                FinLoader();
            });
        }
        
        function CalendarioNiver(button){

            TirarSelecaoBtn();
            button.classList.add("active");
            
            IniLoader();

            Promise.all([ListarEventosCat(2), ListarPessoas()]).then(function ([dataEventos, dataPessoas]) {

                const idBirthday = dataEventos.length + 1;

                const dataCalendarBirthday = {
                    id: idBirthday,
                    backgroundColor: 'rgba(var(--teal-rgb), 0.4)',
                    borderColor: 'rgba(var(--teal-rgb), 1)',
                    textColor: '#fff',
                    events: dataPessoas
                }

                dataEventos.push(dataCalendarBirthday);

                const calendarEl = document.getElementById('calendario');

                let calendarOptions = {
                    headerToolbar: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
                    },
                    defaultView: 'month',
                    navLinks: true, // can click day/week names to navigate views
                    businessHours: true, // display business hours
                    editable: false,
                    selectable: false,
                    selectMirror: false,
                    droppable: false, // this allows things to be dropped onto the calendar

                    eventClick: function (arg) {
                        console.log('arg.event:', arg.event);
                        const description = arg.event.extendedProps.description;
                        Swal.fire({
                            position: 'center',
                            icon: 'info',
                            title: arg.event.title,
                            html:
                            '<br> Descrição: ' + description,
                            showConfirmButton: true,
                        });
                    },

                    dayMaxEvents: true, // allow "more" link when too many events
                    eventSources: dataEventos,
                };

                // Verifique a largura da tela e ajuste a visualização padrão
                if (window.innerWidth < 1200) {
                    calendarOptions.initialView = 'listWeek';
                }

                let calendar = new FullCalendar.Calendar(calendarEl, calendarOptions);
                calendar.render();

                FinLoader();
            });
        }
        
        function CalendarioCat(button){
            TirarSelecaoBtn();
            button.classList.add("active");
            
            IniLoader();

            Promise.all([ListarEventosCat(button.value)]).then(function ([dataEventos]) {

                const calendarEl = document.getElementById('calendario');
                let calendarOptions = {
                    timeZone: 'America/Sao_Paulo',
                    headerToolbar: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
                    },
                    defaultView: 'month',
                    navLinks: true, // can click day/week names to navigate views
                    businessHours: true, // display business hours
                    editable: false,
                    selectable: false,
                    selectMirror: false,
                    droppable: false, // this allows things to be dropped onto the calendar

                    eventClick: function (arg) {
                        console.log('arg.event:', arg.event);
                        const descriptionEvent = arg.event.extendedProps.description;
                        const dataEvent = arg.event.extendedProps.dataEvent;
                        const localEvent = arg.event.extendedProps.localEvent;
                        Swal.fire({
                            position: 'center',
                            icon: 'info',
                            title: arg.event.title,
                            html: 
                            '<br> <strong>Data:</strong> ' + dataEvent +
                            '<br> <strong>Local:</strong> ' + localEvent +
                            '<br> <strong>Descrição:</strong> ' + descriptionEvent,
                            showConfirmButton: true,
                        });
                    },

                    dayMaxEvents: true, // allow "more" link when too many events
                    eventSources: dataEventos,
                };
                
                // Verifique a largura da tela e ajuste a visualização padrão
                if (window.innerWidth < 1200) {
                    calendarOptions.initialView = 'listWeek';
                }

                let calendar = new FullCalendar.Calendar(calendarEl, calendarOptions);
                calendar.render();

                FinLoader();
            });
        }
        
        function CalendarioMin(button){
            TirarSelecaoBtn();
            button.classList.add("active");
            
            IniLoader();

            Promise.all([ListarEventosMin(button.value)]).then(function ([dataEventos]) {

                const calendarEl = document.getElementById('calendario');

                let calendarOptions = {
                    timeZone: 'America/Sao_Paulo',
                    headerToolbar: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
                    },
                    defaultView: 'month',
                    navLinks: true, // can click day/week names to navigate views
                    businessHours: true, // display business hours
                    editable: false,
                    selectable: false,
                    selectMirror: false,
                    droppable: false, // this allows things to be dropped onto the calendar

                    eventClick: function (arg) {
                        console.log('arg.event:', arg.event);
                        const descriptionEvent = arg.event.extendedProps.description;
                        const dataEvent = arg.event.extendedProps.dataEvent;
                        const localEvent = arg.event.extendedProps.localEvent;
                        Swal.fire({
                            position: 'center',
                            icon: 'info',
                            title: arg.event.title,
                            html: 
                            '<br> <strong>Data:</strong> ' + dataEvent +
                            '<br> <strong>Local:</strong> ' + localEvent +
                            '<br> <strong>Descrição:</strong> ' + descriptionEvent,
                            showConfirmButton: true,
                        });
                    },

                    dayMaxEvents: true, // allow "more" link when too many events
                    eventSources: dataEventos,
                };
                
                // Verifique a largura da tela e ajuste a visualização padrão
                if (window.innerWidth < 1200) {
                    calendarOptions.initialView = 'listWeek';
                }

                let calendar = new FullCalendar.Calendar(calendarEl, calendarOptions);
                calendar.render();

                FinLoader();
            });
        }
        
        function ListarEventos() {
            return new Promise(function (resolve, reject) {

                let categoriasArrays = {};
                let countIdCat = 1;
                let countIdData = 1;
                let backgroundColor = '';
                let borderColor = '';

                // Usando uma Promise para esperar pela lista de líderes
                ListaMinisterios().then(function (listaMinisterios) {
                    $.post('api/listarEventos')
                        .done(function (data) {

                            data.forEach(function (evento) {
                                const idProcurado = evento.ministerioId;
                                const categoriaEventoId = evento.categoriaEventoId;
                                let nomeMinisterio = listaMinisterios.find(ministerio => ministerio.idMinisterio === idProcurado)?.nomeMinisterio;
                                nomeMinisterio = nomeMinisterio ? nomeMinisterio : 'Ministerio não encontrado!';

                                let isNiver = 0;
                                let dataInicioEvento = evento.dataHoraInicioEvento;
                                let dataFimEvento = evento.dataHoraFimEvento;
                                let anoAtual = new Date().getFullYear();
                                if (categoriaEventoId == 2) {
                                    
                                    dataInicioEvento = new Date(dataInicioEvento);
                                    dataInicioEvento = dataInicioEvento.toISOString().split('T')[0];
                                    dataFimEvento = new Date(dataFimEvento);
                                    dataFimEvento = dataFimEvento.toISOString().split('T')[0];
                                    dataInicioEvento = dataInicioEvento.replace(/^(\d{4})/, anoAtual);
                                    dataFimEvento = dataFimEvento.replace(/^(\d{4})/, anoAtual);
                                    isNiver = 1;
                                }
                                else{
                                    dataInicioEvento = new Date(dataInicioEvento);
                                    dataInicioEvento = formatarDataHora(dataInicioEvento);
                                    dataFimEvento = new Date(dataFimEvento);
                                    dataFimEvento = formatarDataHora(dataFimEvento);
                                }

                                if (categoriaEventoId) {
                                    if (!categoriasArrays[categoriaEventoId]) {
                                        backgroundColor = categoriaEventoId == 2 ? 'rgba(var(--teal-rgb), 0.4)' : 'rgba(var(--primary-rgb), 0.4)';
                                        borderColor = categoriaEventoId == 2 ? 'rgba(var(--teal-rgb), 1)' : 'rgba(var(--primary-rgb), 1)';
                                        categoriasArrays[categoriaEventoId] = {
                                            id: countIdCat,
                                            backgroundColor: backgroundColor,
                                            borderColor: borderColor,
                                            textColor: '#fff',
                                            events: []
                                        };
                                        countIdCat++;
                                    }

                                    categoriasArrays[categoriaEventoId].events.push({
                                        id: countIdData,
                                        start: dataInicioEvento,
                                        end: dataFimEvento,
                                        title: evento.nomeEvento,
                                        description: evento.observacoesEvento,
                                        dataEvent: dataInicioEvento,
                                        localEvent: evento.localEvento,
                                        isNiver: isNiver
                                    });

                                    countIdData++;
                                }
                            });
                            const arraysCategorias = Object.values(categoriasArrays);

                            resolve(arraysCategorias);
                        })
                        .fail(function (error) {
                            console.error('Erro na requisição:', error);
                            Swal.fire({
                                position: 'center',
                                icon: 'error',
                                title: 'Erro ao listar!',
                                showConfirmButton: false,
                                timer: 1500
                            });
                            reject(error);
                        });
                });
        
            });
        }

        function ListarEventosCat(cat) {
            return new Promise(function (resolve, reject) {
                let categoriasArrays = {};
                let countIdCat = 1;
                let countIdData = 1;
                let backgroundColor = '';
                let borderColor = '';

                $.post('api/listarEventos')
                    .done(function (data) {
                        data.forEach(function (evento) {
                            const categoriaEventoId = evento.categoriaEventoId;
                            
                            if (categoriaEventoId == cat) {

                                let dataInicioEvento = evento.dataHoraInicioEvento;
                                let dataFimEvento = evento.dataHoraFimEvento;

                                if (!categoriasArrays[categoriaEventoId]) {
                                    backgroundColor = categoriaEventoId == 2 ? 'rgba(var(--teal-rgb), 0.4)' : 'rgba(var(--primary-rgb), 0.4)';
                                    borderColor = categoriaEventoId == 2 ? 'rgba(var(--teal-rgb), 1)' : 'rgba(var(--primary-rgb), 1)';
                                    categoriasArrays[categoriaEventoId] = {
                                        id: countIdCat,
                                        backgroundColor: backgroundColor,
                                        borderColor: borderColor,
                                        textColor: '#fff',
                                        events: []
                                    };
                                    countIdCat++;
                                }

                                categoriasArrays[categoriaEventoId].events.push({
                                    id: countIdData,
                                    start: dataInicioEvento,
                                    end: dataFimEvento,
                                    title: evento.nomeEvento,
                                    description: evento.observacoesEvento
                                });

                                countIdData++;
                            }
                        });

                        const arraysCategorias = Object.values(categoriasArrays);
                        resolve(arraysCategorias);
                    })
                    .fail(function (error) {
                        console.error('Erro na requisição:', error);
                        Swal.fire({
                            position: 'center',
                            icon: 'error',
                            title: 'Erro ao listar!',
                            showConfirmButton: false,
                            timer: 1500
                        });
                        reject(error);
                    });
            });
        }

        function ListarEventosMin(min) {
            return new Promise(function (resolve, reject) {
                let categoriasArrays = {};
                let countIdCat = 1;
                let countIdData = 1;
                let backgroundColor = '';
                let borderColor = '';

                $.post('api/listarEventos')
                    .done(function (data) {
                        data.forEach(function (evento) {
                            const categoriaEventoId = evento.categoriaEventoId;
                            const ministerioId = evento.ministerioId;
                            
                            if (ministerioId == min) {
                                if (categoriaEventoId != 2) {
                                    let dataInicioEvento = evento.dataHoraInicioEvento;
                                    let dataFimEvento = evento.dataHoraFimEvento;
                                    if (!categoriasArrays[categoriaEventoId]) {
                                        backgroundColor = categoriaEventoId == 2 ? 'rgba(var(--teal-rgb), 0.4)' : 'rgba(var(--primary-rgb), 0.4)';
                                        borderColor = categoriaEventoId == 2 ? 'rgba(var(--teal-rgb), 1)' : 'rgba(var(--primary-rgb), 1)';
                                        categoriasArrays[categoriaEventoId] = {
                                            id: countIdCat,
                                            backgroundColor: backgroundColor,
                                            borderColor: borderColor,
                                            textColor: '#fff',
                                            events: []
                                        };
                                        countIdCat++;
                                    }
    
                                    categoriasArrays[categoriaEventoId].events.push({
                                        id: countIdData,
                                        start: dataInicioEvento,
                                        end: dataFimEvento,
                                        title: evento.nomeEvento,
                                        description: evento.observacoesEvento
                                    });
    
                                    countIdData++;
                                }

                            }
                        });

                        const arraysCategorias = Object.values(categoriasArrays);
                        resolve(arraysCategorias);
                    })
                    .fail(function (error) {
                        console.error('Erro na requisição:', error);
                        Swal.fire({
                            position: 'center',
                            icon: 'error',
                            title: 'Erro ao listar!',
                            showConfirmButton: false,
                            timer: 1500
                        });
                        reject(error);
                    });
            });
        }

        function ListaMinisterios() {
            return new Promise(function (resolve, reject) {

                const selectMin = $("#filter-ministerio");

                selectMin.empty();
                selectMin.append(`<option value="">Selecione um ministério</option>`);

                $.post('api/listarMinisteriosEventos')
                    .done(function (data) {
                        data.forEach(function(ministerio) {
                            selectMin.append(`<option value="${ministerio.idMinisterio}">${ministerio.nomeMinisterio}</option>`);
                        });
                        resolve(data);
                    })
                    .fail(function (error) {
                        console.error('Erro na requisição:', error);
                        Swal.fire({
                            position: 'center',
                            icon: 'error',
                            title: 'Erro ao listar!',
                            showConfirmButton: false,
                            timer: 1500
                        });
                        reject(error);
                    });
            });
        }
    
        function ListarPessoas(){
            return new Promise(function (resolve, reject) {
                
                let dataEvents = [];
                let count = 1;

                const formData = { tipoPessoa : 'todos' }

                $.post('api/listarPessoas', formData)
                    .done(function (data) {

                        data.forEach(function(pessoa) {

                            if(pessoa.nomePessoa != "" && pessoa.nomePessoa != null){
                                const nome = 'Aniversário de ' + pessoa.nomePessoa;
                                const description = 'Hoje ' + pessoa.nomePessoa + ' está fazendo aniversário';
                                const dataOld = pessoa.dataNascimentoPessoa;
                                let anoAtual = new Date().getFullYear();
                                let data = new Date(dataOld);
    
                                if (Object.prototype.toString.call(data) === '[object Date]' && !isNaN(data)) {
                                    // const dataFormatada = data.toISOString().split('T')[0]; 
                                    const dataFormatada = data.toISOString().split('T')[0];
                                    data = dataFormatada;
                                } else {
                                    data = dataOld;
                                }
    
                                data = data.replace(/^(\d{4})/, anoAtual);
    
                                dataEvents.push({ 
                                    id: count, 
                                    start: data, 
                                    end: data, 
                                    title: nome, 
                                    description: description,
                                    isNiver: 1
                                });
    
                                count ++;
                            } 
                        });

                        resolve(dataEvents);
                    })
                    .fail(function (error) {
                        console.error('Erro na requisição:', error);
                        Swal.fire({
                            position: 'center',
                            icon: 'error',
                            title: 'Erro ao listar!',
                            showConfirmButton: false,
                            timer: 1500
                        });
                        reject(error);
                    });
            });
        }
    
        function ListarCategorias(){

            const selectCat = $("#filter-categoria");

            selectCat.empty();
            selectCat.append(`<option value="">Selecione uma categoria</option>`);

            $.post('api/listarCategoriasEventos')
                .done(function (data) {
                    data.forEach(function(categoria) {
                        if(categoria.idCategoriaEvento != 2){
                            selectCat.append(`<option value="${categoria.idCategoriaEvento}">${categoria.nomeCategoriaEvento}</option>`);
                        }
                    });
                })
                .fail(function (error) {
                    console.error('Erro na requisição:', error);
                    Swal.fire({
                        position: 'center',
                        icon: 'error',
                        title: 'Erro ao listar!',
                        showConfirmButton: false,
                        timer: 1500
                    });
                });
        }

        function TirarSelecaoBtn(){
            const btns = document.querySelectorAll(".btn-filter");

            btns.forEach(btn => {
                btn.classList.remove("active");
            });
        }
    
        function TodosEventos(){
            return new Promise(function (resolve, reject) {

                let eventosPorMes = Array.from({ length: 12 }, () => 0);

                $.post('api/listarEventos')
                    .done(function (data) {

                        data.forEach(function (evento) {
                            const categoriaEventoId = evento.categoriaEventoId;
                            if (categoriaEventoId != 2) {
                                let dataInicioEvento = evento.dataHoraInicioEvento;

                                dataInicioEvento = new Date(dataInicioEvento);
                                dataInicioEvento = dataInicioEvento.toISOString().split('T')[0];
                                
                                const mesEvento = new Date(dataInicioEvento).getMonth();
                                
                                eventosPorMes[mesEvento]++;
                            }

                        });
                        resolve(eventosPorMes);
                    })
                    .fail(function (error) {
                        console.error('Erro na requisição:', error);
                        Swal.fire({
                            position: 'center',
                            icon: 'error',
                            title: 'Erro ao listar!',
                            showConfirmButton: false,
                            timer: 1500
                        });
                        reject(error);
                    });
            });
        }

        function TodasAcoesVoluntario() {
            return $.post('api/listarTodasAcoes').then(function (data) {
                const contagemAcoesPorVoluntario = data.reduce(function (acc, acao) {
                    const voluntarioId = acao.voluntarioId;

                    if (acc[voluntarioId]) {
                        acc[voluntarioId].quantidade++;
                    } else {
                        acc[voluntarioId] = {
                            nome: acao.nomePessoa,
                            quantidade: 1
                        };
                    }

                    return acc;
                }, {});

                const array = Object.values(contagemAcoesPorVoluntario);

                return array;
            });
        }

        function GraficoLinhaEvento(){
            Promise.all([TodosEventos()]).then(function ([dataEventos]) {

                const options = {
                    series: [{
                        name: "Eventos",
                        data: dataEventos
                    }],
                    chart: {
                        height: 320,
                        type: 'line',
                        zoom: {
                            enabled: false
                        }
                    },
                    colors: ['#8e54e9'],
                    dataLabels: {
                        enabled: false
                    },
                    stroke: {
                        curve: 'straight',
                        width: 3,
                    },
                    grid: {
                        borderColor: '#f2f5f7',
                    },
                    title: {
                        text: 'Qtd de Eventos por mês',
                        align: 'left',
                        style: {
                            fontSize: '13px',
                            fontWeight: 'bold',
                            color: '#8c9097'
                        },
                    },
                    xaxis: {
                        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Out', 'Nov', 'Dez'],
                        labels: {
                            show: true,
                            style: {
                                colors: "#8c9097",
                                fontSize: '11px',
                                fontWeight: 600,
                                cssClass: 'apexcharts-xaxis-label',
                            },
                        }
                    },
                    yaxis: {
                        labels: {
                            show: true,
                            style: {
                                colors: "#8c9097",
                                fontSize: '11px',
                                fontWeight: 600,
                                cssClass: 'apexcharts-yaxis-label',
                            },
                        }
                    }
                };

                let chart = new ApexCharts(document.querySelector("#chart-events-year"), options);
                chart.render();
            });
        }

        function GraficoBarraVoluntario(){
            Promise.all([TodasAcoesVoluntario()]).then(function ([dataAcoes]) {
                
                const nomes = dataAcoes.map(item => item.nome);
                const valores = dataAcoes.map(item => item.quantidade);

                const options = {
                    series: [{
                        data: valores
                    }],
                    chart: {
                        type: 'bar',
                        height: 320
                    },
                    plotOptions: {
                        bar: {
                            borderRadius: 4,
                            horizontal: true,
                        }
                    },
                    colors: ["#8e54e9"],
                    grid: {
                        borderColor: '#f2f5f7',
                    },
                    dataLabels: {
                        enabled: false
                    },
                    xaxis: {
                        categories: nomes,
                        labels: {
                            show: true,
                            style: {
                                colors: "#8c9097",
                                fontSize: '11px',
                                fontWeight: 600,
                                cssClass: 'apexcharts-xaxis-label',
                            },
                        }
                    },
                    yaxis: {
                        labels: {
                            show: true,
                            style: {
                                colors: "#8c9097",
                                fontSize: '11px',
                                fontWeight: 600,
                                cssClass: 'apexcharts-yaxis-label',
                            },
                        }
                    }
                };

                let chart = new ApexCharts(document.querySelector("#chart-action-volun"), options);
                chart.render();
            });
        }

    </script>

</body>

</html>