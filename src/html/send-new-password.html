@SPK@include("partials/mainhead.html")

</head>

<style>
    #result-send{
        padding: 0;
        margin: 10px 0 5px;
    }

    .alert.alert-success {
        border: none;
    }

    .alert.alert-danger {
        border: none;
    }

</style>

<body class="bg-white">

    <div id="notification-container" class="hidden">
        <div id="notification-message"></div>
    </div>
    
    @SPK@include("partials/switcher.html")

    <div class="row mx-0 authentication">
        <div class="d-flex justify-content-center align-items-center d-lg-none">
            <a href="./"> <img src="../assets/images/brand-logos/desktop-dark.png" alt="Voltar" class="authentication-brand cover-dark-logo op-9"></a>  
        </div>
        <div class="col-xxl-6 col-xl-7 col-lg-12">
            <div class="row mx-0 justify-content-center align-items-center h-100">
                <div class="col-xxl-6 col-xl-7 col-lg-7 col-md-7 col-sm-8 col-12">
                    <div class="p-sm-5 p-0">
                        <p class="h4 fw-semibold mb-2">Esqueci minha senha</p>
                        <p class="mb-3 text-muted op-7 fw-normal">Digite o seu e-mail para enviarmos o link de recuperação.</small>
                        <div class="row mx-0 gy-3 mt-3">
                            <div class="col-xl-12 mt-0 px-0">
                                <label for="signin-mail" class="form-label text-default">E-mail</label>
                                <input type="email" class="form-control form-control-lg" id="signin-mail" placeholder="Digite seu e-mail">
                            </div>
                            <div id="result-send"></div>
                            <div class="col-xl-12 d-grid mt-2  px-0">
                                <a href="#" onclick="sendReset()" class="btn btn-lg btn-primary">Enviar</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xxl-6 col-xl-5 col-lg-5 d-xl-block d-none px-0">
            <div class="authentication-cover">
                <div class="">
                    <div class="row justify-content-center g-0">
                        <div class="col-xl-9">
                            <a href="./"> <img src="../assets/images/brand-logos/desktop-dark.png" alt="Voltar" class="authentication-brand cover-dark-logo op-9"></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    
    <!-- Custom JS -->
    <script src="../assets/js/custom.js"></script>

</body>

<script>

    function sendReset() {
        var email = document.getElementById("signin-mail").value;
        var data = {
            email: email
        };
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "/esqueci-minha-senha", true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                if (xhr.status === 200) {
                    var response = JSON.parse(xhr.responseText);
                    if (response.sts === "success") { 
                        document.getElementById("result-send").innerHTML = '<div class="alert alert-success" role="alert">' + response.message + '</div>';
                    } else {
                        document.getElementById("result-send").innerHTML = '<div class="alert alert-danger" role="alert">' + response.message + '</div>';
                    }
                } else {
                    document.getElementById("result-send").innerHTML = '<div class="alert alert-danger" role="alert">Erro ao enviar email de recuperação. Tente novamente mais tarde.</div>';
                }
            }
        };
        xhr.send(JSON.stringify(data));
    }

</script>

</html>